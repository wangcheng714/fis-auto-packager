define("subway:static/js/base/coords.js",function(t,o,i){function n(t,o){this.x=t,this.y=o}n.prototype.toString=function(){return[this.x,this.y].join(",")},n.prototype.floor=function(){return new n(this.x>>0,this.y>>0)},i.exports=n});
;define("subway:static/js/base/line.js",function(s,i,t){function h(s,i,t,h,l,n,b,o,e,a){this.lid=s,this.lb=i,this.slb=t,this.uid=h,this.n=l,this.loop=n,this.lbx=b,this.lby=o,this.lbr=e,this.lc=a,this.stations=[]}t.exports=h});
;define("subway:static/js/base/station.js",function(s,t,i){function h(s,t,i,h,n,o,r,x,c,y,d,e,u,a,b,l,f,p,j,_,w){this.sid=s,this.lb=t,this.uid=i,this.px=h,this.py=n,this.x=o,this.y=r,this.rx=x,this.ry=c,this.st=y,this.ex=d,this.iu=e,this.rc=u,this.slb=a,this.ln=b,this.color=l,this.icon=f,this.dx=p,this.dy=j,this.trs_x=_,this.trs_y=w}i.exports=h});
;var util=require("common:static/js/util.js"),searchData=require("common:static/js/searchdata.js"),Coords=require("subway:static/js/base/coords.js"),Station=require("subway:static/js/base/station.js"),Line=require("subway:static/js/base/line.js");define("subway:static/js/base/subway.js",function(t,i,n){function e(t,i,n){this.fullName=i,this.shortName=t,this.lines_number=n,this.lines=[],this.width=null,this.height=null}e.prototype.findBy=function(t){var i=[];if("function"==typeof t)for(var n,e=this.lines.length-1;e>=0;e--){n=this.lines[e],t.apply(n)&&i.push(n);for(var s=n.stations.length-1;s>=0;s--){var a=n.stations[s];t.apply(a)&&i.push(a)}}return i},e.prototype.findNearestStation=function(t,i,n){var e=Number.POSITIVE_INFINITY,s=0,a=null,o="point"===i?"p":"";if(t&&t.x&&t.y)for(var r=this.lines,u=0;u<r.length;u++)for(var h=r[u],l=0;l<h.stations.length;l++){var f=h.stations[l];f.iu&&(s=Math.pow(f[o+"x"]-t.x,2)+Math.pow(f[o+"y"]-t.y,2),e>s&&(e=s,a=f))}if(!(n>0&&e>n*n))return a},e.prototype.findLineOneWayDirection=function(t,i){var n,e;if(i){var s=this.findBy(function(){return this instanceof Station&&this.st&&this.sid&&this.lid==t.lid&&this.sid==i});if(0===s.length)n=t.stations[0],e=t.stations[t.stations.length-1];else if(n=s[0],t.stations[0]==n){for(var a=t.stations.length-1;a>0;a--)if(t.stations[a].st){e=t.stations[a];break}}else for(var o=0;o<t.stations.length;o++)if(t.stations[o].st){e=t.stations[o];break}}else n=t.stations[0],e=t.stations[t.stations.length-1];return{firstStation:n,lastStation:e}},e.prototype.parseStationExt=function(t){var i=this;if(t&&t.content&&t.content.ext&&t.content.ext.line_info){var n={},e=[];$.each(t.content.ext.line_info,function(t,s){var a=s.line_name;if(void 0===n[a]){var o=i.findBy(function(){return this instanceof Line&&this.lid.indexOf(a)>=0});0===o.length?e.push(s):n[a]={line:o[0],ext:[s]}}else n[a].ext.push(s)}),$.each(e,function(t,e){var s=e.line_name,a=e.terminals,o=i.findBy(function(){return this instanceof Line&&0===this.lid.indexOf(s)&&this.lid.indexOf(a)>0});0!==o.length&&$.each(o,function(t,i){var s=i.lid;if(void 0===n[s])n[s]={line:i,ext:[e],lost:!0};else{var a=!1;$.each(n[s].ext,function(t,i){i.terminals==e.terminals&&(a=!0)}),a||n[s].ext.push(e)}})});var s=[];$.each(n,function(t,i){i.lost&&1==i.ext.length&&s.push(t)}),$.each(s,function(t,i){n[i]=null,delete n[i]});var a=[];$.each(n,function(t,i){var n=i.line,e=i.ext,s={};s.color=n.lc,s.name=n.lid,s.dirs=[],$.each(e,function(t,i){s.dirs.push({name:i.terminals,startTime:i.first_time,endTime:i.last_time})}),a.push(s)});var o=i.findBy(function(){return this instanceof Station&&this.st&&this.uid===t.content.uid});if(0===o.length&&(o=this.findBy(function(){return this instanceof Station&&this.st&&this.sid&&0===t.content.name.indexOf(this.sid)}),0===o.length))return;var r=o[0],u=util.parseGeo(t.content.geo).points;return{station:r,points:u,lines:a}}},e.prototype.getStationExt=function(t,i,n,e){var s=this;s._currentQueryUID=i;var a="qt="+t+"&c="+this.cityCode+"&uid="+i;searchData.fetch(a,function(t){i===s._currentQueryUID&&(s._currentQueryUID=null,t=s.parseStationExt(t),n&&n(t))},function(t){e&&e(t)})},n.exports=e});
;define("subway:static/js/libs/hammer.js",function(t,e,n){"use strict";function r(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in window,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&window.navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=window.document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var n=this;return r(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){n.enabled&&i.detection.startDetect(n,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),r=0;r<n.length;r++)this.element.addEventListener(n[r],e,!1);return this},off:function(t,e){for(var n=t.split(" "),r=0;r<n.length;r++)this.element.removeEventListener(n[r],e,!1);return this},trigger:function(t,e){e||(e={});var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var r=this.element;return i.utils.hasParent(e.target,r)&&(r=e.target),r.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var o=null,a=!1,s=!1;i.event={bindDom:function(t,e,n){for(var r=e.split(" "),i=0;i<r.length;i++)t.addEventListener(r[i],n,!1)},onTouch:function(t,e,n){var r=this;this.bindDom(t,i.EVENT_TYPES[e],function(c){var u=c.type.toLowerCase();if(!u.match(/mouse/)||!s){u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===c.which?a=!0:u.match(/mouse/)&&1!==c.which&&(a=!1),u.match(/touch|pointer/)&&(s=!0);var h=0;a&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?h=i.PointerEvent.updatePointer(e,c):u.match(/touch/)?h=c.touches.length:s||(h=u.match(/up/)?0:1),h>0&&e==i.EVENT_END?e=i.EVENT_MOVE:h||(e=i.EVENT_END),(h||null===o)&&(o=c),n.call(i.detection,r.collectEventData(t,e,r.getTouchList(o,e),c)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(h=i.PointerEvent.updatePointer(e,c))),h||(o=null,a=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:(t.indentifier=1,[t])},collectEventData:function(t,e,n,r){var o=i.POINTER_TOUCH;return(r.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,r))&&(o=i.POINTER_MOUSE),{center:i.utils.getCenter(n),timeStamp:(new Date).getTime(),target:r.target,touches:n,eventType:e,pointerType:o,srcEvent:r,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,e,n){for(var r in e)void 0!==t[r]&&n||(t[r]=e[r]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],r=0,i=t.length;i>r;r++)e.push(t[r].pageX),n.push(t[r].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,r=e.pageX-t.pageX;return 180*Math.atan2(n,r)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),r=Math.abs(t.pageY-e.pageY);return n>=r?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,r=e.pageY-t.pageY;return Math.sqrt(n*n+r*r)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,r=["webkit","khtml","moz","Moz","ms","o",""];if(e&&t.style){for(var i=0;i<r.length;i++)for(var o in e)e.hasOwnProperty(o)&&(n=o,r[i]&&(n=r[i]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[o]);"none"==e.userSelect&&(t.onselectstart=function(){return!1}),"none"==e.userDrag&&(t.ondragstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,r=this.gestures.length;r>n;n++){var o=this.gestures[n];if(!this.stopped&&e[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,r=t.touches.length;r>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var o=t.timeStamp-e.timeStamp,a=t.center.pageX-e.center.pageX,s=t.center.pageY-e.center.pageY,c=i.utils.getVelocity(o,a,s);return i.utils.extend(t,{deltaTime:o,deltaX:a,deltaY:s,velocityX:c.x,velocityY:c.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),interimAngle:this.current.lastEvent&&i.utils.getAngle(this.current.lastEvent.center,t.center),direction:i.utils.getDirection(e.center,t.center),interimDirection:this.current.lastEvent&&i.utils.getDirection(this.current.lastEvent.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var e=t.defaults||{};return void 0===e[t.name]&&(e[t.name]=!0),i.utils.extend(i.defaults,e,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END&&"touchcancel"!=t.srcEvent.type){var n=i.detection.previous,r=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,e){if(i.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),this.triggered=!1,void 0;if(!(e.options.drag_max_touches>0&&t.touches.length>e.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<e.options.drag_min_distance&&i.detection.current.name!=this.name)return;if(i.detection.current.name!=this.name&&(i.detection.current.name=this.name,e.options.correct_for_drag_min_distance)){var n=Math.abs(e.options.drag_min_distance/t.distance);i.detection.current.startEvent.center.pageX+=t.deltaX*n,i.detection.current.startEvent.center.pageY+=t.deltaY*n,t=i.detection.extendEventData(t)}(i.detection.current.lastEvent.drag_locked_to_axis||e.options.drag_lock_to_axis&&e.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=i.utils.isVertical(r)?t.deltaY<0?i.DIRECTION_UP:i.DIRECTION_DOWN:t.deltaX<0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),e.trigger(this.name+t.direction,t),(e.options.drag_block_vertical&&i.utils.isVertical(t.direction)||e.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,e){if(i.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),this.triggered=!1,void 0;if(!(t.touches.length<2))switch(e.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var n=Math.abs(1-t.scale),r=Math.abs(t.rotation);if(n<e.options.transform_min_scale&&r<e.options.transform_min_rotation)return;i.detection.current.name=this.name,this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),r>e.options.transform_min_rotation&&e.trigger("rotate",t),n>e.options.transform_min_scale&&(e.trigger("pinch",t),e.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case i.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},n.exports=i});
;define("subway:static/js/libs/svg.js",function(t,e,n){var i=this.SVG=function(t){return i.supported?new i.Doc(t):void 0};if(i.ns="http://www.w3.org/2000/svg",i.xlink="http://www.w3.org/1999/xlink",i.did=1e3,i.eid=function(t){return"svgjs"+t.charAt(0).toUpperCase()+t.slice(1)+i.did++},i.create=function(t){var e=document.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},i.extend=function(){var t,e,n,i;for(t=[].slice.call(arguments),e=t.pop(),i=t.length-1;i>=0;i--)if(t[i])for(n in e)t[i].prototype[n]=e[n]},i.get=function(t){var e=document.getElementById(t);return e?e.instance:void 0},i.supported=function(){return!!document.createElementNS&&!!document.createElementNS(i.ns,"svg").createSVGRect}(),!i.supported)return!1;i.regex={test:function(t,e){return this[e].test(t)},unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,rgb:/rgb\((\d+),(\d+),(\d+)\)/,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isStyle:/^font|text|leading|cursor/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/},i.defaults={matrix:"1,0,0,1,0,0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,fill:"#000",stroke:"#000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},i.Color=function(t){var e;this.r=0,this.g=0,this.b=0,"string"==typeof t&&i.regex.isRgb.test(t)&&(e=i.regex.rgb.exec(t.replace(/\s/g,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3]))},i.extend(i.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+this._compToHex(this.r)+this._compToHex(this.g)+this._compToHex(this.b)},_compToHex:function(t){var e=t.toString(16);return 1==e.length?"0"+e:e}}),i.Color.test=function(t){return t+="",i.regex.isRgb.test(t)},i.Color.isRgb=function(t){return t&&"number"==typeof t.r},i.ViewBox=function(t){var e,n,i,s,r=t.bbox(),o=(t.attr("viewBox")||"").match(/-?[\d\.]+/g);this.x=r.x,this.y=r.y,this.width=t.node.clientWidth||t.node.getBoundingClientRect().width,this.height=t.node.clientHeight||t.node.getBoundingClientRect().height,o&&(e=parseFloat(o[0]),n=parseFloat(o[1]),i=parseFloat(o[2]),s=parseFloat(o[3]),this.zoom=this.width/this.height>i/s?this.height/s:this.width/i,this.x=e,this.y=n,this.width=i,this.height=s),this.zoom=this.zoom||1},i.extend(i.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),i.BBox=function(t){var e;try{e=t.node.getBBox()}catch(n){e={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}this.x=e.x+t.trans.x,this.y=e.y+t.trans.y,this.width=e.width*t.trans.scaleX,this.height=e.height*t.trans.scaleY,this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},i.Element=function(t){this._stroke=i.defaults.attrs.stroke,this.styles={},this.trans=i.defaults.trans(),(this.node=t)&&(this.type=t.nodeName,this.node.instance=this)},i.extend(i.Element,{x:function(t){return t&&(t/=this.trans.scaleX),this.attr("x",t)},y:function(t){return t&&(t/=this.trans.scaleY),this.attr("y",t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){return this.attr({width:t,height:e})},remove:function(){return this.parent&&this.parent.removeElement(this),this},doc:function(t){return this._parent(t||i.Doc)},attr:function(t,e,n){if(null==t){for(t={},e=this.node.attributes,n=e.length-1;n>=0;n--)t[e[n].nodeName]=i.regex.test(e[n].nodeValue,"isNumber")?parseFloat(e[n].nodeValue):e[n].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return this._isStyle(t)?"text"==t?this.content:"leading"==t&&this.leading?this.leading():this.style(t):(e=this.node.getAttribute(t),null==e?i.defaults.attrs[t]:i.regex.test(e,"isNumber")?parseFloat(e):e);if("style"==t)return this.style(e);if("x"==t&&Array.isArray(this.lines))for(n=this.lines.length-1;n>=0;n--)this.lines[n].attr(t,e);"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),(i.Color.test(e)||i.Color.isRgb(e))&&(e=new i.Color(e).toHex()),null!=n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),this._isStyle(t)&&("text"==t?this.text(e):"leading"==t&&this.leading?this.leading(e):this.style(t,e),this.rebuild&&this.rebuild(t,e))}return this},transform:function(t,e){if(0==arguments.length)return this.trans;if("string"==typeof t){if(arguments.length<2)return this.trans[t];var n={};return n[t]=e,this.transform(n)}var n=[];t=this._parseMatrix(t);for(e in t)null!=t[e]&&(this.trans[e]=t[e]);return this.trans.matrix=this.trans.a+","+this.trans.b+","+this.trans.c+","+this.trans.d+","+this.trans.e+","+this.trans.f,t=this.trans,t.matrix!=i.defaults.matrix&&n.push("matrix("+t.matrix+")"),(1!=t.scaleX||1!=t.scaleY)&&n.push("scale("+t.scaleX+","+t.scaleY+")"),(0!=t.x||0!=t.y)&&n.push("translate("+t.x/t.scaleX+","+t.y/t.scaleY+")"),this._offset&&0!=this._offset.x&&0!=this._offset.y&&n.push("translate("+-this._offset.x+","+-this._offset.y+")"),0==n.length?this.node.removeAttribute("transform"):this.node.setAttribute("transform",n.join(" ")),this},style:function(t,e){if(0==arguments.length)return this.attr("style")||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!i.regex.isCss.test(t))return this.styles[t];t=t.split(";");for(var n=0;n<t.length;n++)e=t[n].split(":"),2==e.length&&this.style(e[0].replace(/\s+/g,""),e[1].replace(/^\s+/,"").replace(/\s+$/,""))}else null===e||i.regex.test(e,"isBlank")?delete this.styles[t]:this.styles[t]=e;t="";for(e in this.styles)t+=e+":"+this.styles[e]+";";return""==t?this.node.removeAttribute("style"):this.node.setAttribute("style",t),this},data:function(t,e,n){if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(i){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:n===!0||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this},bbox:function(){return new i.BBox(this)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},_parent:function(t){for(var e=this;null!=e&&!(e instanceof t);)e=e.parent;return e},_isStyle:function(t){return"string"==typeof t?i.regex.test(t,"isStyle"):!1},_parseMatrix:function(t){if(t.matrix){var e=t.matrix.replace(/\s/g,"").split(",");6==e.length&&(t.a=parseFloat(e[0]),t.b=parseFloat(e[1]),t.c=parseFloat(e[2]),t.d=parseFloat(e[3]),t.e=parseFloat(e[4]),t.f=parseFloat(e[5]))}return t}}),i.Container=function(t){this.constructor.call(this,t)},i.Container.prototype=new i.Element,i.extend(i.Container,{children:function(){return this._children||(this._children=[])},add:function(t,e){if(!this.has(t)){if(e=null==e?this.children().length:e,t.parent){var n=t.parent.children().indexOf(t);t.parent.children().splice(n,1)}this.children().splice(e,0,t),this.node.insertBefore(t.node,this.node.childNodes[e]||null),t.parent=this}return this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.children().indexOf(t)>=0},each:function(t){var e,n=this.children();for(e=0,length=n.length;length>e;e++)n[e]instanceof i.Shape&&t.apply(n[e],[e,n]);return this},removeElement:function(t){var e=this.children().indexOf(t);return this.children().splice(e,1),this.node.removeChild(t.node),t.parent=null,this},group:function(){return this.put(new i.G)},rect:function(t,e){return this.put((new i.Rect).size(t,e))},circle:function(t){return this.ellipse(t,t)},ellipse:function(t,e){return this.put((new i.Ellipse).size(t,e).move(0,0))},line:function(t,e,n,s){return this.put((new i.Line).plot(t,e,n,s))},polyline:function(t,e){return this.put(new i.Polyline(e)).plot(t)},path:function(t,e){return this.put(new i.Path(e)).plot(t)},image:function(t,e,n){return e=null!=e?e:100,this.put((new i.Image).load(t).size(e,null!=n?n:e))},text:function(t){return this.put((new i.Text).text(t))},viewbox:function(t){return 0==arguments.length?new i.ViewBox(this):(t=1==arguments.length?[t.x,t.y,t.width,t.height]:[].slice.call(arguments),this.attr("viewBox",t.join(" ")))},clear:function(){for(var t=this.children().length-1;t>=0;t--)this.removeElement(this.children()[t]);return this}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchend","touchmove","touchcancel"].forEach(function(t){i.Element.prototype[t]=function(e){var n=this;return this.node["on"+t]="function"==typeof e?function(){return e.apply(n,arguments)}:null,this}}),i.on=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},i.off=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},i.extend(i.Element,{on:function(t,e){return i.on(this.node,t,e),this},off:function(t,e){return i.off(this.node,t,e),this}}),i.G=function(){this.constructor.call(this,i.create("g"))},i.G.prototype=new i.Container,i.extend(i.G,{x:function(t){return null==t?this.trans.x:this.transform("x",t)},y:function(t){return null==t?this.trans.y:this.transform("y",t)}}),i.Doc=function(t){this.parent="string"==typeof t?document.getElementById(t):t,this.constructor.call(this,"svg"==this.parent.nodeName?this.parent:i.create("svg")),this.attr({xmlns:i.ns,version:"1.1",width:"100%",height:"100%"}).attr("xlink",i.xlink,i.ns),"svg"!=this.parent.nodeName&&this.stage()},i.Doc.prototype=new i.Container,i.extend(i.Doc,{stage:function(){var t,e=this,n=document.createElement("div");return n.style.cssText="position:relative;height:100%;",e.parent.appendChild(n),n.appendChild(e.node),t=function(){"complete"===document.readyState?(e.style("position:absolute;"),setTimeout(function(){e.style("position:relative;"),e.parent.removeChild(e.node.parentNode),e.node.parentNode.removeChild(e.node),e.parent.appendChild(e.node),e.fixSubPixelOffset(),i.on(window,"resize",function(){e.fixSubPixelOffset()})},5)):setTimeout(t,10)},t(),this},fixSubPixelOffset:function(){var t=this.node.getScreenCTM();this.style("left",-t.e%1+"px").style("top",-t.f%1+"px")}}),i.Shape=function(t){this.constructor.call(this,t)},i.Shape.prototype=new i.Element,i.Rect=function(){this.constructor.call(this,i.create("rect"))},i.Rect.prototype=new i.Shape,i.Ellipse=function(){this.constructor.call(this,i.create("ellipse"))},i.Ellipse.prototype=new i.Shape,i.extend(i.Ellipse,{x:function(t){return null==t?this.cx()-this.attr("rx"):this.cx(t+this.attr("rx"))},y:function(t){return null==t?this.cy()-this.attr("ry"):this.cy(t+this.attr("ry"))},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t/this.trans.scaleX)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t/this.trans.scaleY)},size:function(t,e){return this.attr({rx:t/2,ry:e/2})}}),i.Line=function(){this.constructor.call(this,i.create("line"))},i.Line.prototype=new i.Shape,i.extend(i.Line,{x:function(t){var e=this.bbox();return null==t?e.x:this.attr({x1:this.attr("x1")-e.x+t,x2:this.attr("x2")-e.x+t})},y:function(t){var e=this.bbox();return null==t?e.y:this.attr({y1:this.attr("y1")-e.y+t,y2:this.attr("y2")-e.y+t})},cx:function(t){var e=this.bbox().width/2;return null==t?this.x()+e:this.x(t-e)},cy:function(t){var e=this.bbox().height/2;return null==t?this.y()+e:this.y(t-e)},size:function(t,e){var n=this.bbox();return this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",n.x+t).attr(this.attr("y1")<this.attr("y2")?"y2":"y1",n.y+e)},plot:function(t,e,n,i){return this.attr({x1:t,y1:e,x2:n,y2:i})}}),i.Polyline=function(){this.constructor.call(this,i.create("polyline"))},i.Polyline.prototype=new i.Shape,i.Path=function(t){this.constructor.call(this,i.create("path")),this.unbiased=!!t},i.Path.prototype=new i.Shape,i.extend(i.Path,{_plot:function(t){return this.attr("d",t||"M0,0")}}),i.extend(i.Polyline,i.Path,{x:function(t){return null==t?this.bbox().x:this.transform("x",t)},y:function(t){return null==t?this.bbox().y:this.transform("y",t)},size:function(t,e){var n=t/this._offset.width;return this.transform({scaleX:n,scaleY:null!=e?e/this._offset.height:n})},plot:function(t){var e=this.trans.scaleX,n=this.trans.scaleY;return this._plot(t),this._offset=this.transform({scaleX:1,scaleY:1}).bbox(),this.unbiased?this._offset.x=this._offset.y=0:(this._offset.x-=this.trans.x,this._offset.y-=this.trans.y),this.transform({scaleX:e,scaleY:n})}}),i.Image=function(){this.constructor.call(this,i.create("image"))},i.Image.prototype=new i.Shape,i.extend(i.Image,{load:function(t){return t?this.attr("href",this.src=t,i.xlink):this}});var s="size family weight stretch variant style".split(" ");i.Text=function(){this.constructor.call(this,i.create("text")),this.styles={"font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"},this._leading=1.2,this._base=.276666666},i.Text.prototype=new i.Shape,i.extend(i.Text,{x:function(t,e){return null==t?e?this.attr("x"):this.bbox().x:(e||(e=this.style("text-anchor"),t="start"==e?t:"end"==e?t+this.bbox().width:t+this.bbox().width/2),this.attr("x",t))},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t,e){return null==t?this.bbox().cy:this.y(e?t:t-this.bbox().height/2)},move:function(t,e,n){return this.x(t,n).y(e)},center:function(t,e,n){return this.cx(t,n).cy(e,n)},text:function(t){if(null==t)return this.content;this.clear(),this.content=i.regex.isBlank.test(t)?"text":t;var e,n,s=t.split("\n");for(e=0,n=s.length;n>e;e++)this.tspan(s[e]);return this.attr("textLength",1).attr("textLength",null)},tspan:function(t){var e=(new i.TSpan).text(t);return this.node.appendChild(e.node),this.lines.push(e),e.attr("style",this.style())},size:function(t){return this.attr("font-size",t)},leading:function(t){return null==t?this._leading:(this._leading=t,this.rebuild("leading",t))},rebuild:function(){var t,e,n=this.styles["font-size"];for(t=0,e=this.lines.length;e>t;t++)this.lines[t].attr({dy:n*this._leading-(0==t?n*this._base:0),x:this.attr("x")||0,style:this.style()});return this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.lines=[],this}}),i.TSpan=function(){this.constructor.call(this,i.create("tspan"))},i.TSpan.prototype=new i.Shape,i.extend(i.TSpan,{text:function(t){return this.node.appendChild(document.createTextNode(t)),this}}),i.Nested=function(){this.constructor.call(this,i.create("svg")),this.style("overflow","visible")},i.Nested.prototype=new i.Container,i._stroke=["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],i._fill=["color","opacity","rule"];var r=function(t,e){return"color"==e?t:t+"-"+e};["fill","stroke"].forEach(function(t){var e={};e[t]=function(e){if("string"==typeof e||i.Color.isRgb(e))this.attr(t,e);else for(index=i["_"+t].length-1;index>=0;index--)null!=e[i["_"+t][index]]&&this.attr(r(t,i["_"+t][index]),e[i["_"+t][index]]);return this},i.extend(i.Shape,e)}),i.extend(i.Element,{scale:function(t,e){return this.transform({scaleX:t,scaleY:null==e?t:e})},matrix:function(t){return this.transform({matrix:t})},opacity:function(t){return this.attr("opacity",t)}}),i.Text&&i.extend(i.Text,{font:function(t){for(var e in t)"anchor"==e?this.attr("text-anchor",t[e]):s.indexOf(e)>-1?this.attr("font-"+e,t[e]):this.attr(e,t[e]);return this}}),n.exports=i});
;var Station=require("subway:static/js/base/station.js"),Line=require("subway:static/js/base/line.js"),Subway=require("subway:static/js/base/subway.js");define("subway:static/js/parser/xmldocumentparser.js",function(t,e,r){var a=function(t,e){this.xmlDoc=t,this.transformScale=e||1.3,this.marginRatio=1.1};a.prototype.parse=function(){if(!this.xmlDoc)return null;for(var t,e,r,a,i=this.xmlDoc.getElementsByTagName("sw")[0],s=this.parseSubway(i),o={left:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,top:Number.POSITIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY},u=[],n=this.xmlDoc.getElementsByTagName("l"),l=0;l<n.length;l++){for(var b=this.parseLine(n[l]),g=[],h=n[l].getElementsByTagName("p"),p=0;p<h.length;p++){var c=this.parseStation(h[p]);c.lid=b.lid,c.x<o.left&&(o.left=c.x,t=c.sid),c.x>o.right&&(o.right=c.x,e=c.sid),c.y<o.top&&(o.top=c.y,r=c.sid),c.y>o.bottom&&(o.bottom=c.y,a=c.sid),g.push(c)}b.stations=g,u.push(b)}for(var m=o.left*this.marginRatio>>0,A=o.top*this.marginRatio>>0,f=0;f<u.length;f++){var y=u[f];y.lbx-=m,y.lby-=A;for(var S=0;S<y.stations.length;S++){var x=y.stations[S];x.x-=m,x.y-=A,x.lc=y.lc}}return s.bounds=o,s.lines=u,s.width=Math.abs(o.left-o.right)*this.marginRatio>>0,s.height=Math.abs(o.bottom-o.top)*this.marginRatio>>0,s},a.prototype.parseSubway=function(t){var e=t.getAttribute("c"),r=t.getAttribute("cid"),a=t.getAttribute("n");return new Subway(e,r,a)},a.prototype.parseLine=function(t){var e=t.getAttribute("lid"),r=t.getAttribute("lb"),a=t.getAttribute("slb"),i=t.getAttribute("uid"),s=parseInt(t.getAttribute("n"),10),o="true"==t.getAttribute("loop"),u=parseFloat(t.getAttribute("lbx"))*this.transformScale,n=parseFloat(t.getAttribute("lby"))*this.transformScale+15*this.transformScale,l=parseFloat(t.getAttribute("lbr")),b="#"+t.getAttribute("lc").slice(2);return new Line(e,r,a,i,s,o,u,n,l,b)},a.prototype.parseStation=function(t){var e=t.getAttribute("sid"),r=t.getAttribute("lb"),a=t.getAttribute("uid"),i=parseFloat(t.getAttribute("px")),s=parseFloat(t.getAttribute("py")),o=parseFloat(t.getAttribute("x"))*this.transformScale,u=parseFloat(t.getAttribute("y"))*this.transformScale,n=parseFloat(t.getAttribute("rx"))*this.transformScale+2*this.transformScale,l=parseFloat(t.getAttribute("ry"))*this.transformScale+12*this.transformScale,b="true"==t.getAttribute("st"),g="true"==t.getAttribute("ex"),h="true"==t.getAttribute("iu"),p="true"==t.getAttribute("rc"),c="true"==t.getAttribute("slb"),m=t.getAttribute("ln"),A=t.getAttribute("icon")||"",f=parseFloat(t.getAttribute("dx"))*this.transformScale,y=parseFloat(t.getAttribute("dy"))*this.transformScale,S=0,x=0;try{S=parseFloat(t.getAttribute("trs_x"))*this.transformScale||0,x=parseFloat(t.getAttribute("trs_y"))*this.transformScale||0}catch(I){}S-=8*this.transformScale,x-=8*this.transformScale;var d;return new Station(e,r,a,i,s,o,u,n,l,b,g,h,p,c,m,d,A,f,y,S,x)},r.exports=a});
;var Station=require("subway:static/js/base/station.js"),Line=require("subway:static/js/base/line.js"),Subway=require("subway:static/js/base/subway.js");define("subway:static/js/parser/jsonparser.js",function(s,a,e){var t=function(s){this.data=s};t.prototype.parse=function(){if(!this.data)return null;var s=new Subway,a=this.data;for(var e in a)if("lines"==e.toLowerCase())for(var t=a[e],r=0;r<t.length;r++){var i=t[r],n=new Line;for(var o in i)if("stations"==o.toLowerCase())for(var u=i[o],f=0;f<u.length;f++){var w=u[f],b=new Station;for(var v in w)b[v]=w[v];n.stations.push(b)}else n[o]=i[o];s.lines.push(n)}else s[e]=a[e];return s},e.exports=t});
;var util=require("common:static/js/util.js"),storage=require("common:static/js/localstorage.js");define("subway:static/js/model/subway.js",function(a,e,i){i.exports={xmlUri:{beijing:"/mobile/simple/static/xml/sw_beijing_3db40b5.xml",shanghai:"/mobile/simple/static/xml/sw_shanghai_abef9f3.xml",guangzhou:"/mobile/simple/static/xml/sw_guangzhou_58fcf90.xml",shenzhen:"/mobile/simple/static/xml/sw_shenzhen_d6e0794.xml",hongkong:"/mobile/simple/static/xml/sw_hongkong_fc52034.xml",chengdu:"/mobile/simple/static/xml/sw_chengdu_9c08b66.xml",changchun:"/mobile/simple/static/xml/sw_changchun_f1dbec8.xml",chongqing:"/mobile/simple/static/xml/sw_chongqing_5aa9c12.xml",dalian:"/mobile/simple/static/xml/sw_dalian_16d8619.xml",foshan:"/mobile/simple/static/xml/sw_foshan_dfcce58.xml",hangzhou:"/mobile/simple/static/xml/sw_hangzhou_0d7c1c2.xml",kunming:"/mobile/simple/static/xml/sw_kunming_103c320.xml",nanjing:"/mobile/simple/static/xml/sw_nanjing_1b719c9.xml",shenyang:"/mobile/simple/static/xml/sw_shenyang_355b1d5.xml",suzhou:"/mobile/simple/static/xml/sw_suzhou_7243dc9.xml",tianjin:"/mobile/simple/static/xml/sw_tianjin_5f0563f.xml",wuhan:"/mobile/simple/static/xml/sw_wuhan_05d27fa.xml",xian:"/mobile/simple/static/xml/sw_xian_c73e136.xml",haerbin:"/mobile/simple/static/xml/sw_haerbin_91c1e15.xml"},imageDataEncoded:{transfer:"data:image/png;base64,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",airport:"data:image/png;base64,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"},imageDataLoadedLength:2,cityCode:"",cityName:"",fileName:"",fetch:function(a,e,i){var t=this;this.imageData=[],this.imageDataLoaded=0;for(var A in this.imageDataEncoded)this.imageData[A]||(this.imageData[A]=new Image,this.imageData[A].onload=function(){t.imageData[A]=this,t.imageDataLoaded++,t.imageDataLoaded===t.imageDataLoadedLength&&(t.onresourceload=!0,listener.trigger("subway","onresourceload"))},this.imageData[A].src=this.imageDataEncoded[A]);var s=a.city||a.c||a.cc,l=this._checkIfSupportSubway(s);if(l){this.fileName=l[0],this.cityName=l[1],this.cityCode=l[2];var c,A,n,o=this.fileName,m=this.xmlUri[o],g=/.*\/(.*?)\.xml$/;g.test(m)&&(c=m.match(g),c&&c[1]&&(A=c[1])),t._getJSONOffline(A,function(a){n=t._parseJSON(a),n.cityName=t.fileName,n.cityCode=t.cityCode,n.imageData=t.imageData,n.imageDataEncoded=t.imageDataEncoded,t.subway=n,e&&e(n)},function(){try{if(localStorage)for(var a,s=new RegExp("sw_"+o+".*"),c=0,g=localStorage.length;g>c;c++)a=localStorage.key(c),a!=A&&s.test(a)&&localStorage.removeItem(a)}catch(u){}t._getXMLOnline(m,function(a){n=t._parseXML(a),storage.addData(A,n),n.cityName=t.fileName,n.cityCode=t.cityCode,n.imageData=t.imageData,n.imageDataEncoded=t.imageDataEncoded,t.subway=n,e&&e(n)},function(){i&&i(l)})})}else i&&i(-1)},_parseXML:function(e){var i=a("subway:static/js/parser/xmldocumentparser.js"),t=new i(e);return t.parse()},_parseJSON:function(e){var i=a("subway:static/js/parser/jsonparser.js"),t=new i(e);return t.parse()},getCityNode:function(a){return this._checkIfSupportSubway(a)},_checkIfSupportSubway:function(a){var e=util.ifSupportSubway(a),i=this.isBrowserNotSupport=e===!1;return e&&e.split(",")[0]?e.split(","):i?-3:-2},_getXMLOnline:function(a,e,i){return a?($.ajax({type:"GET",url:a,dataType:"xml",timeout:5e3,success:function(a){a?e&&e(a):i&&i()},error:function(){i&&i()}}),void 0):(i&&i(),void 0)},_getJSONOffline:function(a,e,i){return a?(storage.selectData(a,{success:function(a){a?e&&e(a):i&&i()},error:function(){i&&i()}}),void 0):(i&&i(),void 0)}}});
;var Coords=require("subway:static/js/base/coords.js");define("subway:static/js/renderer/canvas.js",function(t,i,e){function s(){}$.extend(s.prototype,{initialize:function(t,i){this.$el=t,this.subway=i,this.container=null,this.canvas=null,this.devicePixelRatio=this.getDevicePixelRatio(),this.marginRatio=0,this.deviceWidth=$("#subway-holder").offset().width,this.deviceHeight=$("#subway-holder").offset().height,this.canvasWidth=this.deviceWidth*this.devicePixelRatio*(1+2*this.marginRatio),this.canvasHeight=this.deviceHeight*this.devicePixelRatio*(1+2*this.marginRatio),this.mapWidth=i.width,this.mapHeight=i.height,this.scaleRatio=1,this.maxScaleRatio=2.4,this.minScaleRatio=.2*this.devicePixelRatio,this.scaleRate=1.25,this.zoomInRate=this.scaleRate,this.zoomOutRate=1/this.scaleRate,this.orig_x=null,this.orig_y=null,this.tolerance=20,this._createElement()},_createElement:function(){this.$el.find("#sw_renderer").remove();var t=this.canvas=document.createElement("canvas");t.width=this.canvasWidth,t.height=this.canvasHeight,t.style.position="absolute",t.style.left=this._toInt(-this.deviceWidth*this.marginRatio)+"px",t.style.top=this._toInt(-this.deviceHeight*this.marginRatio)+"px",t.style.width=this._toInt(this.deviceWidth*(1+2*this.marginRatio))+"px",t.style.height=this._toInt(this.deviceHeight*(1+2*this.marginRatio))+"px",this.container=$('<div id="sw_renderer" style="position: relative; width: 100%; height: 100%" />'),this.$el.append(this.container.append(t))},clear:function(){var t=this.canvas;if(t){var i=t.getContext("2d");i.save(),i.fillStyle="white",i.fillRect(0,0,t.width,t.height),i.restore()}},plot:function(){this._fitCanvas(),this._plotCanvas()},_plotCanvas:function(t,i,e){var s=this.canvas,a=s.getContext("2d"),h=this.subway;this.orig_x=void 0==t?-this.mapWidth/2:t,this.orig_y=void 0==i?-this.mapHeight/2:i,e=e||this.scaleRatio,this._plotMap(a,h)},_plotMap:function(t,i){this.clear(),t.save(),t.translate(0,0),t.scale(this.scaleRatio,this.scaleRatio),t.translate(this.orig_x+this._toUnit(this.canvasWidth/2),this.orig_y+this._toUnit(this.canvasHeight/2));for(var e=i.lines,s=0;s<e.length;s++)this._plotLine(t,e[s]);for(var a=0;a<e.length;a++)this._plotLineStations(t,e[a]);t.restore()},_plotLine:function(t,i){t.beginPath(),t.fillStyle=i.lc,t.font="bold 16px 微软雅黑",t.fillText(i.lb,i.lbx,i.lby);for(var e=0;e<i.stations.length;e++){var s=i.stations[e],a=s.x,h=s.y,o=s.rc;if(t.lineWidth=8,t.strokeStyle=i.lc,o){var n=i.stations[e-1],r=i.stations[e+1],l=n.x,c=r.x,d=n.y,v=r.y,g=2*a-(l+c)/2,u=2*h-(d+v)/2;t.quadraticCurveTo(g,u,c,v)}else t.lineTo(a,h);if(i.loop&&e==i.stations.length-1){var f=i.stations[0].x,m=i.stations[0].y;t.lineTo(f,m)}}t.stroke()},_plotLineStations:function(t,i){for(var e=0;e<i.stations.length;e++)this._plotStation(t,i.stations[e])},_plotStation:function(t,i){if(i.iu){if(i.icon){var e=i.icon.split(",");t.drawImage(this.subway.imageData.airport,i.x+this._toInt(e[1]),i.y+this._toInt(e[2]),32,32)}i.ex?t.drawImage(this.subway.imageData.transfer,i.x+i.trs_x,i.y+i.trs_y,20,20):(t.beginPath(),t.arc(i.x,i.y,6.5,0,2*Math.PI,!1),t.strokeStyle=i.lc,t.lineWidth=2.5,t.fillStyle="white",t.fill(),t.stroke()),t.fillStyle="black",t.font="normal 16px 微软雅黑",t.fillText(i.lb,i.x+i.rx,i.y+i.ry)}},zoomIn:function(){this.scaleRatio*=this.zoomInRate,this._plotCanvas(this.orig_x,this.orig_y)},zoomOut:function(){this.scaleRatio*=this.zoomOutRate,this._plotCanvas(this.orig_x,this.orig_y)},zoom:function(t,i,e){e=Math.max(Math.min(e,this.maxScaleRatio),this.minScaleRatio),this.scaleRatio=e,this._plotCanvas(this.orig_x,this.orig_y)},getOriginPoint:function(){return new Coords(this.orig_x,this.orig_y)},getDevicePixelRatio:function(){return window.devicePixelRatio&&window.devicePixelRatio>1?2:1},moveTo:function(t,i){this._clearCSSTransform(),this._plotCanvas(t,i,this.scaleRatio)},move:function(t,i){this._setCSSTransform(t,i)},_clearCSSTransform:function(){this._setCSSTransform(0,0,1)},_setCSSTransform:function(t,i,e){(void 0==t||void 0==i)&&(t=this.orig_x||0,i=this.orig_y||0),void 0==e&&(e=1);var s=this._getTransformMatrix(t,i,e);this.container.css({transform:s,"-webkit-transform":s})},isOutOfBounds:function(t,i,e,s){var a=t+this.getPointUnitFromPixelValue(e),h=i+this.getPointUnitFromPixelValue(s);return a>0||a<-this.mapWidth||h>0||h<-this.mapHeight?{delta_x:this.getPixelValueFromPointUnit((a>0?0:a<-this.mapWidth?-this.mapWidth:a)-t),delta_y:this.getPixelValueFromPointUnit((h>0?0:h<-this.mapHeight?-this.mapHeight:h)-i)}:!1},resize:function(t,i){if(i&&i!=this.deviceHeight){var e=this.getPointFromPixel(new Coords(this.deviceWidth/2,this.deviceHeight/2)),s=this.scaleRatio;this.deviceWidth=$("#subway-holder").offset().width,this.deviceHeight=$("#subway-holder").offset().height,this.canvas.width=this.canvasWidth=this.deviceWidth*this.devicePixelRatio*(1+2*this.marginRatio),this.canvas.height=this.canvasHeight=this.deviceHeight*this.devicePixelRatio*(1+2*this.marginRatio),this.canvas.style.width=this._toInt(this.deviceWidth*(1+2*this.marginRatio))+"px",this.canvas.style.height=this._toInt(this.deviceHeight*(1+2*this.marginRatio))+"px",this.zoom(e.x,e.y,s)}},_fitCanvas:function(){var t,i,e=this.deviceWidth>this.deviceHeight;e?(t=this.mapHeight,i=this.deviceHeight):(t=this.mapWidth,i=this.deviceWidth);for(var s,a,h=this.scaleRatio;t>i&&(s=h*this.zoomOutRate,a=t*this.zoomOutRate,!(s<this.minScaleRatio));)h=s,t=a;this.scaleRatio=h},_getTransformMatrix:function(t,i,e){var s=[e,0,0,e,t,i];return"matrix("+s.join(",")+")"},getPointUnitFromPixelValue:function(t){return this._toUnit(t*this.devicePixelRatio)},getPixelValueFromPointUnit:function(t){return this._toPixel(t)/this.devicePixelRatio},getPointFromPixel:function(t){var i=t.x*this.devicePixelRatio,e=t.y*this.devicePixelRatio;if(!(0>i||0>e||i>this.mapWidth||e>this.mapHeight)){var s=this._toInt(this._toUnit(i-this.canvasWidth/2)-this.orig_x),a=this._toInt(this._toUnit(e-this.canvasHeight/2)-this.orig_y);return new Coords(s,a)}},getPixelFromPoint:function(t){var i=t.x+this.orig_x,e=t.y+this.orig_y,s=(this._toPixel(i)+this.canvasWidth/2/(1+2*this.marginRatio))/this.devicePixelRatio,a=(this._toPixel(e)+this.canvasHeight/2/(1+2*this.marginRatio))/this.devicePixelRatio;return new Coords(s,a)},isMaxScale:function(){return this.scaleRatio*this.zoomInRate>this.maxScaleRatio},isMinScale:function(){return this.scaleRatio*this.zoomOutRate<this.minScaleRatio},_toInt:function(t){return t>>0},_toUnit:function(t){return t/this.scaleRatio},_toPixel:function(t){return t*this.scaleRatio}}),e.exports=s});
;var Coords=require("subway:static/js/base/coords.js"),SVG=require("subway:static/js/libs/svg.js");define("subway:static/js/renderer/svg.js",function(t,i,e){function o(){}o.supported=SVG.supported,$.extend(o.prototype,{initialize:function(t,i){this.$el=t,this.subway=i,this.container=null,this.svg=null,this.deviceWidth=$("#subway-holder").offset().width,this.deviceHeight=$("#subway-holder").offset().height,this.mapWidth=i.width,this.mapHeight=i.height,this.scaleRatio=1,this.maxScaleRatio=2,this.minScaleRatio=.2,this.scaleRate=1.25,this.zoomInRate=this.scaleRate,this.zoomOutRate=1/this.scaleRate,this.orig_x=null,this.orig_y=null,this.tolerance=16,this._createElement()},_createElement:function(){this.$el.find("#sw_renderer").remove();var t=$('<svg id="sw_svg" stlye="position: absolute" />').get(0);this.container=$('<div id="sw_renderer" style="position: relative; width: 100%; height: 100%" />'),this.$el.append(this.container.append(t)),this.svg=SVG("sw_svg").size(this.mapWidth,this.mapHeight),this.context=this.svg.group(),window.svg2=this,window.context=this.context},clear:function(){var t=this.context;t.clear()},plot:function(){this.clear(),this._plotSVG(),this._fitSVG()},_plotSVG:function(t,i,e){var o=this.context,s=this.subway;this.orig_x=void 0==t?0:t,this.orig_y=void 0==i?0:i,e=e||this.scaleRatio,this._plotMap(o,s)},_plotMap:function(t,i){var e=i.lines;t.rect(this.mapWidth,this.mapHeight).attr({fill:"none"});for(var o=0;o<e.length;o++){var s=e[o];this._plotLine(t,i,s)}for(var h=0;h<e.length;h++)for(var s=e[h],n=0;n<s.stations.length;n++){var a=s.stations[n];this._plotStation(t,i,a)}},_plotLine:function(t,i,e){t.text(e.lb).font({size:16,weight:"bold"}).fill({color:e.lc}).move(e.lbx,e.lby-16);for(var o=["M"],s=0;s<e.stations.length;s++){var h=e.stations[s],n=h.x,a=h.y,r=h.rc;if(r){var c=e.stations[s-1],l=e.stations[s+1],d=c.x,u=l.x,v=c.y,x=l.y,g=2*n-(d+u)/2,m=2*a-(v+x)/2;s>0&&o.push("Q"),o.push([g,m,u,x].join(","))}else s>0&&o.push("L"),o.push(n.toFixed(2)+","+a.toFixed(2))}e.loop&&o.push("Z"),t.path(o.join(""),!0).attr({fill:"none",stroke:e.lc,"stroke-width":8})},_plotStation:function(t,i,e){if(e.iu){if(e.icon){var o=e.icon.split(",");t.image(i.imageDataEncoded.airport,32,32).move(e.x+this._toInt(o[1]),e.y+this._toInt(o[2]))}e.ex?t.image(i.imageDataEncoded.transfer,20,20).move(e.x+e.trs_x,e.y+e.trs_y):t.circle(13).fill({color:"white"}).stroke({color:e.lc,width:2.5}).move(e.x-6.5,e.y-6.5),t.text(e.lb).font({size:16,weight:"normal"}).fill({color:"#000"}).move(e.x+e.rx,e.y+e.ry-16)}},zoomIn:function(t,i){t=t||this.deviceWidth/2,i=i||this.deviceHeight/2;var e=this.getPointFromPixel(new Coords(t,i));this.zoom(e.x,e.y,this.scaleRatio*this.zoomInRate)},zoomOut:function(t,i){t=t||this.deviceWidth/2,i=i||this.deviceHeight/2;var e=this.getPointFromPixel(new Coords(t,i));this.zoom(e.x,e.y,this.scaleRatio*this.zoomOutRate)},zoom:function(t,i,e){var o=this.context;e=Math.max(Math.min(e,this.maxScaleRatio),this.minScaleRatio),o.scale(e,e),this.scaleRatio=e,this.center(t,i)},center:function(t,i){var e=this.context;e.move(this._toPixel(-t)+this.deviceWidth/2,this._toPixel(-i)+this.deviceHeight/2),this.orig_x=e.x(),this.orig_y=e.y()},getOriginPoint:function(){return new Coords(this._toUnit(this.orig_x-this.deviceWidth/2),this._toUnit(this.orig_y-this.deviceHeight/2))},move:function(t,i){this.context,this.orig_x+t,this.orig_y+i;this._setCSSTransform(t,i,1)},moveTo:function(t,i){var e=this.context;t=this._toPixel(t)+this.deviceWidth/2,i=this._toPixel(i)+this.deviceHeight/2,e.move(t,i),this.orig_x=t,this.orig_y=i,this._clearCSSTransform()},isOutOfBounds:function(t,i,e,o){var s=t+this.getPointUnitFromPixelValue(e),h=i+this.getPointUnitFromPixelValue(o);return s>0||s<-this.mapWidth||h>0||h<-this.mapHeight?{delta_x:this.getPixelValueFromPointUnit((s>0?0:s<-this.mapWidth?-this.mapWidth:s)-t),delta_y:this.getPixelValueFromPointUnit((h>0?0:h<-this.mapHeight?-this.mapHeight:h)-i)}:!1},resize:function(t,i){if(i&&i!=this.deviceHeight){var e=this.getPointFromPixel(new Coords(this.deviceWidth/2,this.deviceHeight/2)),o=this.scaleRatio;this.deviceWidth=$("#subway-holder").offset().width,this.deviceHeight=$("#subway-holder").offset().height,this.clear(),this._plotSVG(),this.zoom(e.x,e.y,o)}},_fitSVG:function(){var t,i,e=this.deviceWidth>this.deviceHeight;e?(t=this.mapHeight,i=this.deviceHeight):(t=this.mapWidth,i=this.deviceWidth);for(var o,s,h=this.scaleRatio;t>i&&(o=h*this.zoomOutRate,s=t*this.zoomOutRate,!(o<this.minScaleRatio));)h=o,t=s;this.context.scale(h,h).center(this.deviceWidth/2,this.deviceHeight/2),this.orig_x=this.context.x(),this.orig_y=this.context.y(),this.scaleRatio=h},_setCSSTransform:function(t,i,e){(void 0==t||void 0==i)&&(t=this.orig_x||0,i=this.orig_y||0),void 0==e&&(e=1);var o=this._getTransformMatrix(t,i,e);this.container.css({transform:o,"-webkit-transform":o})},_clearCSSTransform:function(){this._setCSSTransform(0,0,1)},_getTransformMatrix:function(t,i,e){var o=[e,0,0,e,t,i];return"matrix("+o.join(",")+")"},getPointUnitFromPixelValue:function(t){return this._toUnit(t)},getPixelValueFromPointUnit:function(t){return this._toPixel(t)},getPointFromPixel:function(t){var i=this.context,e=t.x,o=t.y,s=this._toInt(this._toUnit(e-i.x())),h=this._toInt(this._toUnit(o-i.y()));return new Coords(s,h)},getPixelFromPoint:function(t){var i=this.context,e=t.x,o=t.y,s=this._toPixel(e)+i.x(),h=this._toPixel(o)+i.y();return new Coords(s,h)},isMaxScale:function(){return this.scaleRatio*this.zoomInRate>this.maxScaleRatio},isMinScale:function(){return this.scaleRatio*this.zoomOutRate<this.minScaleRatio},_toInt:function(t){return t>>0},_toUnit:function(t){return t/this.scaleRatio},_toPixel:function(t){return t*this.scaleRatio}}),e.exports=o});
;define("subway:widget/popupwindow/popupwindow.js",function(require,exports,module){var url=require("common:widget/url/url.js"),util=require("common:static/js/util.js"),Coords=require("subway:static/js/base/coords.js"),stat=require("common:widget/stat/stat.js");module.exports=$.extend({},{offset:{left:1,top:-5},init:function(data){this.data=data;var tpl=this.tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';if(eval(_template_varName),_template_fun_array.push('<div id="sw_pw">    '),data.notification)_template_fun_array.push('        <div class="sw-pw-notification">这是离您最近的地铁站</div>    ');else{_template_fun_array.push('        <ul class="sw-pw-title">            <li class="sw-pw-tl"></li>            <li class="sw-pw-tc">',"undefined"==typeof data.station.lb?"":data.station.lb,'</li>            <li class="sw-pw-tr"></li>        </ul>        <div class="sw-pw-content">            ');for(var i=0;i<data.lines.length;i++){_template_fun_array.push('                <div class="sw-pw-line">                    <div class="sw-pw-line-title" style="border-color:',"undefined"==typeof data.lines[i].color?"":data.lines[i].color,'">                        <span class="line_title_content" style="background-color:',"undefined"==typeof data.lines[i].color?"":data.lines[i].color,'">',"undefined"==typeof data.lines[i].name?"":data.lines[i].name,"</span>                    </div>                    ");for(var j=0;j<data.lines[i].dirs.length;j++)_template_fun_array.push("                        "),data.lines[i].dirs[j].startTime&&data.lines[i].dirs[j].endTime&&_template_fun_array.push('                        <ul class="sw-pw-line-list">                            <li class="sw-pw-line-dir">                                <span class="sw-pw-line-dir-name">',"undefined"==typeof data.lines[i].dirs[j].name?"":data.lines[i].dirs[j].name,'</span><span class="sw-pw-text-gray">方向</span>                            </li>                            <li class="sw-pw-line-time">                                <span class="sw-pw-text-gray-bkg">始</span><span class="sw-pw-text-inline-block">',"undefined"==typeof(data.lines[i].dirs[j].startTime||"00:00")?"":data.lines[i].dirs[j].startTime||"00:00",'</span><span class="sw-pw-text-gray-bkg">末</span><span class="sw-pw-text-inline-block">',"undefined"==typeof(data.lines[i].dirs[j].endTime||"00:00")?"":data.lines[i].dirs[j].endTime||"00:00","</span>                            </li>                        </ul>                        "),_template_fun_array.push("                    ");_template_fun_array.push("                </div>            ")}_template_fun_array.push("        </div>    ")}_template_fun_array.push("</div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],$el=this.$el=$(tpl({data:data}));$("#sw_renderer").append($el),this.bind()},bind:function(){var t=this,a=$(".sw-pw-tl");a.on("touchstart",function(t){a.start={x:t.touches[0].pageX,y:t.touches[0].pageY},t.target.handled=!0}),a.on("click",function(e){if(a.start){var s=e.pageX-a.start.x,i=e.pageY-a.start.y,n=s*s+i*i;if(n>100)return a.start=null,void 0}a.start=null,t.nbSearch()});var e=$(".sw-pw-tr");e.on("touchstart",function(t){e.start={x:t.touches[0].pageX,y:t.touches[0].pageY},t.target.handled=!0}),e.on("click",function(a){if(e.start){var s=a.pageX-e.start.x,i=a.pageY-e.start.y,n=s*s+i*i;if(n>100)return e.start=null,void 0}e.start=null,t.lineSearch()});var s=$(".sw-pw-tc, .sw-pw-content");s.on("touchstart",function(t){s.start={x:t.touches[0].pageX,y:t.touches[0].pageY},t.target.handled=!0}),s.on("click",function(a){if(s.start){var e=a.pageX-s.start.x,i=a.pageY-s.start.y,n=e*e+i*i;if(n>100)return s.start=null,void 0}s.start=null,t.poiSearch()})},destroy:function(){$(".sw-pw-tl, .sw-pw-tr, .sw-pw-tc, .sw-pw-content").off(),this.$el.remove()},show:function(t,a){var e=this.$el;e.css({visibility:"hidden"}).show();var s=this.width=parseFloat(e.width()),i=this.height=parseFloat(e.height());e.css({left:t.x-s/2+this.offset.left,top:t.y-i/2+this.offset.top,visibility:""}),a&&a(s/2,i/2)},hide:function(){this.$el.hide()},move:function(t,a){var e=this.$el,s=parseFloat(e.css("left")),i=parseFloat(e.css("top"));e.css({left:s+t,top:i+a})},setPosition:function(t,a){var e=this.$el;e.css({left:t-this.width/2+this.offset.left,top:a-this.height+this.offset.top})},getPosition:function(){var t=this.$el;return{left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))}},getPoint:function(){return new Coords(this.data.x,this.data.y)},nbSearch:function(){stat.addCookieStat(STAT_CODE.SUBWAY_IW_NB_SEARCH);var t=this.data,a={nb_x:t.lng,nb_y:t.lat,center_name:t.station.lb||"",from:"searchnearby"};url.update({module:"index",action:"searchnearby",query:{foo:"bar"},pageState:a},{trigger:!0,queryReplace:!0,pageStateReplace:!0})},lineSearch:function(){stat.addCookieStat(STAT_CODE.SUBWAY_IW_LINE_SEARCH);var t=this.data,a={word:t.station.lb||"",point:t.lng+","+t.lat},e={};e.end=util.jsonToQuery(a),url.update({module:"place",action:"linesearch",query:{foo:"bar"},pageState:e},{trigger:!0,pageStateReplace:!0,queryReplace:!0})},poiSearch:function(){this.data.uid&&(stat.addCookieStat(STAT_CODE.SUBWAY_IW_DETAIL_SEARCH),url.update({module:"place",action:"detail",query:{qt:"inf",uid:this.data.uid}},{trigger:!0,pageStateReplace:!0,queryReplace:!0}))}})});
;define("subway:widget/subway/subway.js",function(e,t,i){var n=e("common:widget/url/url.js"),o=e("common:widget/appresize/appresize.js"),r=e("subway:static/js/libs/hammer.js"),s=e("subway:static/js/model/subway.js"),a=e("common:widget/stat/stat.js");i.exports=$.extend({},{subway:null,renderer:null,init:function(e){o.update();var t=this.$parent=$("#main"),i=t.height();t.children().each(function(){i-=$(this).height()}),this.$el=$("#subway-holder"),this.$el.css({height:i,visibility:"hidden"}).show(),this.params=n.get(),this.initHammer(),this.render(e),this.bind(),this.initCenterLocation()},render:function(e){this.subway=e;var t=this.renderer=this._getRenderer();t.initialize(this.$el,e),s.onresourceload?t.plot():listener.once("subway","onresourceload",function(){t.plot()})},_getRenderer:function(){var t,i=this.params;return i&&i.pageState&&"canvas"===i.pageState.force?(t=e("subway:static/js/renderer/canvas.js"),new t):(t=this._isSupportSVG()?e("subway:static/js/renderer/svg.js"):e("subway:static/js/renderer/canvas.js"),new t)},_isSupportSVG:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},initHammer:function(){var e=this,t=this.$el.get(0);this.hammer&&(this.hammer.off("transformstart transform transformend dragstart drag dragend tap"),this.renderer.locked=!1);var i,o=this.hammer=new r(t,{prevent_default:!0,drag:!0,drag_block_vertical:!0,drag_block_horizontal:!0,drag_min_distance:10,transform:!0,transform_always_block:!0,tap:!0});o.on("transformstart",function(){var t=(e.subway,e.renderer);t.locked=!0}),o.on("transform",function(t){var n=(e.subway,e.renderer);t.gesture&&t.gesture.preventDefault(),i=n.scaleRatio*t.gesture.scale,n._setCSSTransform(0,0,t.gesture.scale)}),o.on("transformend",function(t){var n=(e.subway,e.renderer);n.locked=!1,t.gesture&&t.gesture.preventDefault(),t.gesture.stopDetect(),n._clearCSSTransform();var o=n.getPointFromPixel(new Coords(n.deviceWidth/2,n.deviceHeight/2));if(n.zoom(o.x,o.y,i),e.popupWindow){var r=n.getPixelFromPoint(e.popupWindow.getPoint());e.popupWindow.setPosition(r.x,r.y)}e.trigger("transformend")});var s,u;o.on("dragstart",function(t){var i=(e.subway,e.renderer);i.locked||(t.gesture&&t.gesture.preventDefault(),origin=i.getOriginPoint(),s=origin.x,u=origin.y)}),o.on("drag",function(t){var i=(e.subway,e.renderer);i.locked||(t.gesture&&t.gesture.preventDefault(),i.move(t.gesture.deltaX,t.gesture.deltaY))}),o.on("dragend",function(t){var i=(e.subway,e.renderer);if(!i.locked){if(t.gesture&&t.gesture.preventDefault(),null==s||null==u)return i._clearCSSTransform(),void 0;var n=i.isOutOfBounds(s,u,t.gesture.deltaX,t.gesture.deltaY);n&&(t.gesture.deltaX=n.delta_x,t.gesture.deltaY=n.delta_y);var o=s+i.getPointUnitFromPixelValue(t.gesture.deltaX),r=u+i.getPointUnitFromPixelValue(t.gesture.deltaY);e.popupWindow&&e.popupWindow.move(t.gesture.deltaX,t.gesture.deltaY),i.moveTo(o,r),s=null,u=null}}),o.on("tap",function(i){var o=e.subway,r=e.renderer;if(i.gesture&&i.gesture.preventDefault(),(!i.target||!(i.target.handled||$(i.target).parents("#sw_pw").size()>0))&&i.gesture&&1===i.gesture.touches.length){var s=t.getBoundingClientRect(),u=i.gesture.touches[0],d=new Coords(u.clientX-s.left,u.clientY-s.top);e.hidePopupWindow();var l=r.getPointFromPixel(d),c=o.findNearestStation(l,"pixel",r.tolerance||16);c&&c.uid&&(a.addStat(STAT_CODE.SUBWAY_STATION_MARKER_CLICK),n.update({query:{station_uid:c.uid}},{replace:!0,trigger:!1}),e.popupStationWindow(c,{zoomToNormal:!1,isNotification:!1}))}})},bind:function(){listener.on("subway","swZoomIn",this.zoomIn,this),listener.on("subway","swZoomOut",this.zoomOut,this),listener.on("common","sizechange",this.onSizeChange,this)},zoomIn:function(){var e,t=this.renderer,i=this.popupWindow;t.isMaxScale()||(t.zoomIn(),i&&(e=t.getPixelFromPoint(i.getPoint()),i.setPosition(e.x,e.y))),listener.trigger("subway","swZoomEnd",{isMinScale:t.isMinScale(),isMaxScale:t.isMaxScale()})},zoomOut:function(){var e,t=this.renderer,i=this.popupWindow;t.isMinScale()||(t.zoomOut(),i&&(e=t.getPixelFromPoint(i.getPoint()),i.setPosition(e.x,e.y))),listener.trigger("subway","swZoomEnd",{isMinScale:t.isMinScale(),isMaxScale:t.isMaxScale()})},isMaxScale:function(){return this.renderer?this.renderer.isMaxScale():!1},isMinScale:function(){return this.renderer?this.renderer.isMinScale():!1},initCenterLocation:function(){var t=this,i=this.params;if(i&&i.query&&i.query.station_uid)this.popupStationWindow({uid:i.query.station_uid},{zoomToNormal:!0,isNotification:!1,successCallback:function(){t.$el.css({visibility:""})}});else if(i&&i.query&&i.query.line_uid);else{var n=e("common:widget/geolocation/location.js");n.hasExactPoi()&&this.subway.cityCode==n.getCityCode()&&this.onGeoSuccess({point:n.getCenterPoi()})}t.$el.css({visibility:""})},onGeoSuccess:function(e){var t=this;if(e){var i=this.subway.findNearestStation(e.point,"point",1e6);this.popupStationWindow(i,{zoomToNormal:!0,isNotification:!0,successCallback:function(){t.$el.css({visibility:""})}})}},onSizeChange:function(e,t){var i=this.renderer,n=this.popupWindow,o=t?t.width:window.innerWidth,r=t?t.height:window.innerHeight,s=r-$(".common-widget-nav").height();if($("#subway-holder").css("height",s+"px"),i&&i.resize(o,r),n){var a=i.getPixelFromPoint(n.getPoint());n.setPosition(a.x,a.y)}},popupStationWindow:function(e,t){var i=this;i.renderer.locked||e&&this.subway.getStationExt("inf",e.uid,$.proxy(function(e){i.renderer.locked=!0,t.zoomToNormal&&i.renderer.zoom(e.station.x,e.station.y,1),i.showPopupWindow({notification:t.isNotification,x:e.station.x,y:e.station.y,uid:e.station.uid,lng:e.points.split(",")[0],lat:e.points.split(",")[1],station:e.station,lines:e.lines}),i.renderer.locked=!1,t.successCallback&&t.successCallback()},i),$.proxy(function(){t.failureCallback&&t.failureCallback()},i))},showPopupWindow:function(t){var i=this.renderer;this.popupWindow=this.popupWindow||e("subway:widget/popupwindow/popupwindow.js"),this.popupWindow.init(t),this.popupWindow.show({x:i.deviceWidth/2,y:i.deviceHeight/2},function(e,n){i.moveTo(-t.x,-t.y+i.getPointUnitFromPixelValue(n))})},hidePopupWindow:function(){this.popupWindow&&this.popupWindow.destroy()}})});
;define("subway:widget/zoomcontrol/zoomcontrol.js",function(o,s,t){t.exports={init:function(){"use strict";this.bind()},bind:function(){$("#swZoomOut").on("touchstart",function(o){$("#swZoomOut").addClass("zoom_btn_tap"),o.target.handled=!0}),$("#swZoomOut").on("click",function(){$("#swZoomOut").removeClass("zoom_btn_tap"),listener.trigger("subway","swZoomOut")}),$("#swZoomIn").on("touchstart",function(o){$("#swZoomIn").addClass("zoom_btn_tap"),o.target.handled=!0}),$("#swZoomIn").on("click",function(){$("#swZoomIn").removeClass("zoom_btn_tap"),listener.trigger("subway","swZoomIn")}),listener.on("subway","swZoomEnd",this.reset,this)},reset:function(o,s){s=s||{},$("#swZoomOut").removeClass("disable_zoom_btn"),s.isMinScale&&$("#swZoomOut").addClass("disable_zoom_btn"),$("#swZoomIn").removeClass("disable_zoom_btn"),s.isMaxScale&&$("#swZoomIn").addClass("disable_zoom_btn")}}});